TODO: fix book cover update time

tojsonstring or to xmlstring , add withchapter property













Extjs on cachefly

http://extjs.cachefly.net/ext-3.0.0/adapter/ext/ext-base.js
http://extjs.cachefly.net/ext-3.0.0/ext-all.js
http://extjs.cachefly.net/ext-3.0.0/resources/css/ext-all.css

// directly access it
http://ajax.googleapis.com/ajax/libs/ext-core/3.0.0/ext-core.js
// alias the newest 3.0.x version
http://ajax.googleapis.com/ajax/libs/ext-core/3.0/ext-core.js
// alias the newest 3.x.x version
http://ajax.googleapis.com/ajax/libs/ext-core/3/ext-core.js
// directly access the uncompressed code
http://ajax.googleapis.com/ajax/libs/ext-core/3.0.0/ext-core-debug.js








## add event listener when page load
var newBody = 
'<html>' +
'<head>' +
'<title>My New Page</title>' +
'</head>' +
'<body>' +
'<p>This page is a complete replacement of the original.</p>' +
'</body>' +
'</html>';
window.addEventListener(
    'load', 
    function() { document.body.innerHTML = newBody; },
    true);
    
    
    
    
var paragraphCount = Ext.DomQuery.select("/html/body/form[id='aspnetForm']/div[id='mainContent']/div:nth(3)/div:nth(1)/div:nth(5)", document, null, XPathResult.ANY_TYPE, null );

alert( 'This document contains ' + paragraphCount.numberValue + ' paragraph elements' );



//get all divs - iterator style
var result = document.evaluate("/html/body/form[@id='aspnetForm']/div[@id='mainContent']/div[3]/div[1]/div[5]", document.documentElement, null,XPathResult.ORDERED_NODE_ITERATOR_TYPE, null);
if (result){
    var node = result.iterateNext();
    while(node) {
        alert(node.innerHTML);
        node = node.iterateNext();
    }
}



XPath.single(null,'//a[text()="下一页"]')






<list>
   <novel>
       <name>
       <length>
       <updateTime>
       <chapter>
           <name>
           <updateTime>
           <url>
       <author>
       <allListUrl>
   <novel>
</list>     
   
   
var p= new RegExp("http://[^\.]*\.qidian\.com/book/bookStore\.aspx*", 'i');
p.test(window.location.toString())




eclipse maven plugin
http://m2eclipse.sonatype.org/update/

subclipse plguin
http://subclipse.tigris.org/update_1.6.x
 
 
grease monkey
https://addons.mozilla.org/en-US/firefox/addon/748 

   
    




var path = "/html/body/form[@id='aspnetForm']/div[@id='mainContent']/div[2]/div[1]/div[2]/table[1]/tbody/tr/td[2]/table/tbody/tr[2]/td"; 
var text = XPath.single(null, path).textContent;
Crawler.extract(text, '小说类别：');       



var n = XPath.single(null,"/html/body/form[@id='aspnetForm']/div[@id='mainContent']/div[2]/div[1]/div[2]/table[1]/tbody/tr/td[2]/table/tbody/tr[2]/td");



var path = "/html/body/form[@id='form1']/center/div[@id='content']/div";
var nodes = XPath.array(null, p);
for(var i=0;i<nodes.length;i++){
    var links = XPath.array(nodes[i], './/a');
    for(var j=0;j<links.length;j++){
        var l = links[j];
        console.log(l);
    }
}












Book
    id
    name 
    author
    hit
    finished      
    bookCover  
    
Chapter
    id
    bookId
    name
    hit
    hasContent
    isPicuture

Site
    id
    name
    domainName
    url    

    
BookSite
    id
    bookId
    siteId    
    updateTime
    coverUrl
    allChapterUrl



    
    
ChapterSite
    id    
    chapterId    
    siteId
    updateTime
    url
    

























第三百八十三章：斜道口的夹击战
第十一章：公子n的雅
第一百八十章 诅咒领域（双更！）
第一百六十一章 碎丹成婴（第三章！）
第一百七十一章 寻找捷径（第二章到！）
第四十三章 双姝007
第九章 异界人的狩猎（2）
第二卷上林的钟声 第二百二十章 盛宴（下）
第二卷上林的钟声 第二百一十六章 撤离
第二卷上林的钟声 第二百零二章 许乐的桃花朵朵开
四章已更，最后24小时，请支持月票！
第二卷上林的钟声 第二百二十一章 广场上的雪、烟以及卡片
第三章 他比烟花寂寞
第九十九章 世子古宇 中
第一百零一章 威逼利诱 上
第四十节：离去
第十四节 突入（1）
第十五节 突入（2）
第94章 男儿当自强
第二零六章 探囊取物（探囊取票～）
第二零七章 强杀（泪眼汪汪求月票）
第一百二十三章 怎么办呢？怀一个吧。
第一百七十四章 女杀手？神仙姐姐！？
第两百七十八章 火帅姐姐的沉沦（一）
第两百七十九章 火帅姐姐的沉沦（二）
第三十九章 四哥反被诬！